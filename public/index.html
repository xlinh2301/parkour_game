<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parkour Game</title>
    <link rel="stylesheet" href="style.css">
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.151.3/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.151.3/examples/jsm/",
                "cannon-es": "/node_modules/cannon-es/dist/cannon-es.js",
                "cannon-es-debugger": "/node_modules/cannon-es-debugger/dist/cannon-es-debugger.js"
            }
        }
    </script>
  </head>
  <body>
    <canvas class="webgl"></canvas>

    <!-- Login Screen -->
    <div id="login-screen" class="overlay">
      <div class="dialog">
        <h1>Parkour Game</h1>
        <button id="start-button">Bắt đầu</button>
        <button id="how-to-play-button">Hướng dẫn</button>
      </div>
    </div>

    <!-- How to Play Modal -->
    <div id="how-to-play-modal" class="overlay hidden">
      <div class="dialog">
        <h2>Hướng dẫn chơi</h2>
        <p><strong>Di chuyển:</strong> W, A, S, D hoặc phím mũi tên</p>
        <p><strong>Nhảy:</strong> Spacebar</p>
        <p><strong>Chạy nhanh:</strong> Giữ phím Shift</p>
        <p><strong>Xoay Camera:</strong> Di chuyển chuột</p>
        <p><strong>Tạm dừng:</strong> Phím Esc</p>
        <hr>
        <p><strong>Mục tiêu:</strong> Đạt đến checkpoint cuối cùng (Level 6).</p>
        <p><strong>Máu:</strong> Bắt đầu với 100 máu. Mất 20 máu mỗi lần rơi. Nhận lại 20 máu ở mỗi checkpoint.</p>
        <button id="close-how-to-play-button">Đóng</button>
      </div>
    </div>

    <!-- Pause Menu (ESC) -->
    <div id="pause-menu" class="overlay hidden">
      <div class="dialog">
        <button id="toggle-music-button">Mute Music</button>
        <button id="continue-button">Resume</button>
        <button id="exit-button">Exit</button>
      </div>
    </div>

    <!-- HUD -->
    <div id="in-game-ui" class="hud hidden">
      <div id="level">Level: 0</div>
      <div id="time">Time: 0.00s</div>
      <div class="health-container">
        <div id="health-bar-container">
            <div id="health-bar"></div>
        </div>
        <span id="health-text">100</span>
      </div>
    </div>

    <!-- Winning Screen -->
    <div id="winning-screen" class="overlay hidden">
      <div class="dialog">
        <h1>Congratulations! You Win!</h1>
        <p>Your final health is your score.</p>
        <div id="final-stats">
          <p>Final Health: <span id="final-health">100</span></p>
          <p>Score: <span id="final-score">0</span></p>
        </div>
        <button id="play-again-button">Play Again</button>
      </div>
    </div>

    <!-- Losing Screen -->
    <div id="losing-screen" class="overlay hidden">
      <div class="dialog">
        <h1>Game Over</h1>
        <p>You ran out of health.</p>
        <p>Score: <span id="final-score-lose">0</span></p>
        <button id="retry-button">Play Again</button>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
